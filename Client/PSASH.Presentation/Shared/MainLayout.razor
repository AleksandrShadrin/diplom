@using PSASH.Core.ValueObjects;
@using PSASH.Presentation.Components;
@using PSASH.Presentation.Models;
@inherits LayoutComponentBase
@inject DialogService DialogService

<PageTitle>PSASH.Presentation</PageTitle>
<RadzenDialog />
<RadzenNotification />

<RadzenLayout>
    <RadzenHeader>
        <div class="px-4">
            <RadzenMenu>
                <RadzenMenuItem Text="Actions" Icon="home">
                    <RadzenMenuItem @onclick:preventDefault="true" Text="SelectFolder" Icon="folder" Click="SelectFolder"></RadzenMenuItem>
                    <RadzenButton Click="@SelectFolder">Select</RadzenButton>
                </RadzenMenuItem>
            </RadzenMenu>
        </div>
    </RadzenHeader>
    <RadzenSidebar class="h-100">
        <TimeSeriesList @bind-TimeSeries="timeSeries">
        </TimeSeriesList>
    </RadzenSidebar>
    <main>
        <article class="content px-4">
            @Body
        </article>
    </main>
</RadzenLayout>




@code {
    private List<TimeSeriesDto> timeSeries = Enumerable
    .Repeat(0, 100)
    .Select((v, i) => new TimeSeriesInfo(i.ToString(), v.ToString()))
    .Select(tsi => TimeSeriesName.FromTimeSeriesInfo(tsi))
    .Select(tsn => new TimeSeriesDto(new List<double>(), tsn))
    .ToList();


    private async Task SelectFolder()
    {
        var result = await DialogService
    .OpenAsync("Folder selector", ds => @<FolderSelector OnConfirm="@(() => ds.Close(true))" />);
    }
}